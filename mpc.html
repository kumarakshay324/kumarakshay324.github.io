    <!DOCTYPE HTML>

<head>
<style>

div.blog_box {
  margin-left: 30%;
  margin-right: 10%;

  background-color: #f5f5ef;
  /*border: 1px black;*/
  opacity: 1.0;
  filter: alpha(opacity=100); /* For IE8 and earlier */
}

div.blog_box_sidenav {
  margin-left: 8%;
  margin-right: 10%;
  position: fixed;
  background-color: #f5f5ef;
  border: 1px solid #dbdbd5;
  height: auto;
  width: 350px;
  opacity: 1.0;
  filter: alpha(opacity=100); /* For IE8 and earlier */
}


div.column{
  /*float: right;*/
  margin-right: 0%;
  margin-left: 0%;  
  width: 30%;
  /*width*/: 30%;
  position: fixed;
}

.blog_box_sidenav p:hover{
  color: #140440;
  font-weight: 500;
  /*text-decoration: bold;*/
  /*background-color: #cfc ;*/

}

code { 
  font-family: monospace;
}

.gist {
   max-width:60%;
   overflow:auto;
   text-align: center;
}

.gist .blob-wrapper.data {
   max-height:auto;
   overflow:auto;
}

</style>
</head>

<html>
    <head>
        <title>Polymorphism  in C++ - AKSHAY KUMAR</title>
        <link rel="icon" href="images/profile.jpg">
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="description" content="" />
        <meta name="keywords" content="" />
        <!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
        <script src="js/jquery.min.js"></script>
        <script src="js/jquery.dropotron.min.js"></script>
        <script src="js/skel.min.js"></script>
        <script src="js/skel-layers.min.js"></script>
        <script src="js/init.js"></script>
        <noscript>
            <link rel="stylesheet" href="css/skel.css" />
            <link rel="stylesheet" href="css/style.css" />
        </noscript>
        <!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
    </head>
    <body class="homepage">

        <!-- Header Wrapper -->
            <div class="wrapper style1">
            
            <!-- Header -->

                        
                        <!-- Nav -->
                            <div class="navbox">
                                <ul style="white-space:nowrap;margin-top: 10px">
                                    <li class="active" style="display:inline; "><a href="portfolio.html" style="text-decoration: none; font-size: 25px; font-weight: 500; color: white">PORTFOLIO &emsp; </a> </li>                                 
                                    <li class="active" style="display:inline; "><a href="images/AKSHAY_KUMAR_RESUME_1PAGE.pdf" target="_blank" style="text-decoration: none; font-size: 25px; font-weight: 500; color: white ">RESUME &emsp;</a></li>

                                    <li class="active" style="display:inline; text-decoration: none;"><a href="index.html" style="text-decoration: none;font-size: 25px; font-weight: 500; color: white">HOME &emsp;</a></li>

                                </ul>
                            </div>
                </div>
                
            </div>          

            <!-- Introduction -->
            <div class="wrapper style6" align="justify" >

            <br>

            <!-- <div class="column"> -->
                <div class="blog_box_sidenav" align="left" >
                    <center>
                    <br>
                    <span style="font-size:25px;text-decoration: none;">LATEST POSTS</span>
                    </center><br>

                    <a style="display:block;font-size:16px;color:black;;text-decoration:none;margin-left:2%;margin-right:10%margin-top:5%" 
                    href="til_series_robotics.html">
                        <p style="margin-right:2%; margin-left: 2%"> TIL in Robotics</p>
                    </a>

                    <a style="display:block;font-size:16px;color:black;;text-decoration:none;margin-left:2%;margin-right:10%margin-top:5%" 
                    href="cmake.html">
                        <p style="margin-right:2%; margin-left: 2%"> CMake Meta Build System</p>
                    </a>

                    <a style="display:block;font-size:16px;color:black;;text-decoration:none;margin-left:2%;margin-right:10%margin-top:5%" 
                    href="stl_cpp.html">
                        <p style="margin-right:2%; margin-left: 2%"> Common Algorithms from the STL Library in C++</p>
                    </a>

                    <a style="display:block;font-size:16px;color:black;;text-decoration:none;margin-left:2%;margin-right:10%margin-top:5%" 
                    href="advanced_conntrol.html">
                        <p style="margin-right:2%; margin-left: 2%"> Control Techniques for Robot Manipulators</p>
                    </a>

                    <a style="display:block;font-size:16px;color:black;;text-decoration:none;margin-left:2%;margin-right:10%margin-top:5%" 
                    href="ros.html">
                        <p style="margin-right:2%; margin-left: 2%"> Robot Operating System (ROS) - Command Line Tools</p>
                    </a>

                    <a style="display:block;font-size:16px;color:black;;text-decoration:none;margin-left:2%;margin-right:10%margin-top:5%" 
                    href="sampling.html">
                        <p style="margin-right:2%; margin-left: 2%">  Sampling-based Motion Planners</p>
                    </a>

                    <a style="display:block;font-size:16px;color:black;;text-decoration:none;margin-left:2%;margin-right:10%margin-top:5%" 
                    href="mp_intro.html">
                        <p style="margin-right:2%; margin-left: 2%">  Motion Planning in Robotics</p>
                    </a>

                    <a style="display:block;font-size:16px;color:black;;text-decoration:none;margin-left:2%;margin-right:10%margin-top:5%" 
                    href="visual_slam.html">
                        <p style="margin-right:2%; margin-left: 2%">  Visual SLAM - An Introduction</p>
                    </a>

                    <a style="display:block;font-size:16px;color:black;;text-decoration:none;margin-left:2%;margin-right:10%margin-top:5%" 
                    href="coverage.html">
                        <p style="margin-right:2%; margin-left: 2%">  Coverage Problem in Mobile Robotics</p>
                        <br>
                    </a>
                    <br>
                </div>

            <div id="mySidenav" class="sidenav">

                     <a href="mailto:singhakshay324@gmail.com" target="_blank" id="gmail1"><img src="images/contacts/gmail.png" style="width:50px;height:50px;"> </a>

                     <a href="mailto:akumar5@wpi.edu" target="_blank" id="gmail2"><img src="images/contacts/outlook.png" style="width:50px;height:50px;"></a>

                    <a href="http://in.linkedin.com/in/kumarakshay324" target="_blank" id="linkedin"><img src="images/contacts/linkedin.png" style="width:50px;height:50px;;"></a></center>

                     <a href="https://github.com/kumar-akshay324" target="_blank" id="github"><img src="images/contacts/github.png" style="width:50px;height:50px;"></a>

                    <a href=" http://www.quora.com/profile/Akshay-Singh-66" target="_blank" id="quora"><img src="images/contacts/quora.png" style="width:50px;height:50px;;"></a>

                    <a href="http://www.facebook.com/singhakshay324" target="_blank" id="social"><img src="images/contacts/fb.png" style="width:50px;height:50px;;"></a>

            </div>

            <div class="blog_box" align="justify" >
                    <!-- <center><img src="images/posts.jpg" style="width:1120px;height:706px;margin-left:5%;"></center> -->
                <br>
                    <h2 style="font-size:40px;font-weight: 500"> MODEL PREDICTIVE CONTROL IN ROBOTICS</h2>
                <br>

              <p style="column-width:1000px;margin-left:200px;margin-right:200px;text-align:justify;">

                Control techniques in robotics can largely be classified as <b style="font-weight: 500">model-based</b> and <b style="font-weight: 500">model-free</b>. The most common control techniques include PID, gain-scheduling, cruise-control, adaptive control, robust control and reinforcemment learning-based control among others. Majority of the model-based control techniques have an upper-hand over the model-free techniques as the former estimate control signals with some information about the response expected from the plant.
                <br><br>
                The model-free techniques like PID or other ML and AI based techniques, need a lot of training to develop the same extent of fidelity as model-based techniques. However, model-based techniques are prone to modeling errors while system identification and modeling in itself is a very strenous process and model-free techniques do not have such requirements. Model-free techniques deriving the tuning parameters during the training procedure are essentially deriving a pseudo-plant model in the backend that helps them know the correct relationshop between the input and output. 
 
              </p>

                <center>
                    <figure>
                        <img src="images/blogs/mpc/controls.png" style="width:411;height:261px;">
                        <figcaption>Examples of Control Techniques</figcaption>
                        <br>
                    </figure>
                </center>

                <center>
                <p style="text-align:center;font-size:20px; "> <b style="font-weight: 500">INTRODUCTION</b> </p>
                </center>

                <p style="column-width:1000px;margin-left:200px;margin-right:200px;text-align:justify;">

                Model predictive control is an advanced control technique that manipulates the plant output while also satisfying the set of constraints and handling disturbances. MPC is an online technique which is essentially an optimization problem for the objective function defined for the desired plant output. MPC uses the plant model and predicts the control signals for a finite set of future timestamps corresponding to the desired output. However, it only implements/executes inputs only for a small fraction of the predicted timestamps and repeats the process at the next prediction timestamp.
                <br><br>
                MPC handles the dynamics of the high non-linear robotic system and the unanticipated disturbances. It can hanle MIMO(multi-input multi-output) systems with constraints on the system properties. As MPC can look into the future predictions, it can also handle unexpected disturbances.
                </p>

                <center>
                    <figure>
                        <img src="images/blogs/mpc/mpc_plant.png" style="width:510;height:130px;">
                        <figcaption>MPC Flowchart</figcaption>
                        <br>
                    </figure>
                </center>

                <center>
                <p style="text-align:center;font-size:20px; "> <b style="font-weight: 500">FUNCTIONAL ASPECTS OF MPC</b> </p>
                </center>

                <p style="column-width:1000px;margin-left:200px;margin-right:200px;text-align:justify;">

                  MPC uses the model of the system and solves an optimization problem attempting to find the global minima for the defined objective function also called cost function. The optimization task is an interative process that finds the most favorable set of input signals that minimize the error in desired and predicted output while also satisyfing the set of constraints. The sequence of control inputs steer the system towards the desired setpoint response.
                  <br><br>
                  MPC has a few design parameters which need to be either selected carefully or learned by experience to obtain the best performance of the controller.
                  <ul style="column-width:1000px;margin-left:220px;margin-right:200px;text-align:justify;list-style-type:disc;">
                    <li>
                      <b style="font-weight: 500"> Sample Time - T<sub>s</sub></b>
                      <br>
                      It is the time period at which the controller executes the control algorithm and sends the instructions to the system. Larger sample time means the system's ability to respond to unknown disturbances is poor and smaller sample time means the controller is very computationally heavy. Thus, the optimal value of the sample time should be the system rise time, i.e. the time in which the system response rises from 10% to 90% of the desired steady-state output.  If the sample time is very low, lower than the mechanical response time of the system; the system doesn't have enough time to act on the current input signal and the new signal arrives thereby creating undesired behavior.
                    </li>
                    <li>
                      <b style="font-weight: 500"> Constraints on variables </b>
                      <br>
                      There could several physical limits on the different inputs and outputs as well as their rate of change, in the system that the optimization should take into consideration. Such constraints are useful in maintaining smooth response, non-impulsive and infeasible behavior of the system.  
                    </li>
                    <li>
                      <b style="font-weight: 500"> Weights to different components of the object function </b>
                      <br>
                      Because there are several constraints and goals to be achieved, it is difficult to quantitatively present the goal priority in the optimization task. In an MPC, weights are defined for ratio between different output goals, or between the outputs and the inputs or between different soft constraints that could be bent a little. 
                    </li>
                    <li>
                      <b style="font-weight: 500"> Prediction Horizon </b>
                      <br>
                      It is the number of the timesteps over which the optimization should be done while predicting the control inputs. The larger the prediction horizon, the more computationally expensive does the system get while the lower the predicted horizon, the poor the optimization efficiency and ability to look into the future. It is the number of timesteps the controller looks into the future and usually 20-30 time samples, each of timestep <b style="font-weight: 500">T<sub>s</sub></b>.
                    </li>
                    <li>
                      <b style="font-weight: 500"> Control Horizon </b>
                      <br>
                      It is a certain number of timesteps into the future that the optimizer derives as the moves that have significant impact on the system's attempt to converge to the desired output. It is usually chosen as 10-20% of the predicted horizon. 
                    </li>
                  </ul>
                </p>
                <p style="column-width:1000px;margin-left:200px;margin-right:200px;text-align:justify;">
                  A typical multivariate control system using an MPC controller operates on the system model, usually non-linear, a cost function and an optimization algorithm. Usually, the problem is a convex optimization task and that should be optimized for prediction horizon.
                  <br><br>
                  A typical cost function for an MPC problemt is:
                </p>
                  <center>
                      <figure>
                          <img src="images/blogs/mpc/cost_function.png" style="width:480;height:92px;">
                          <figcaption>Sample Cost function for a common non-linear function</figcaption>
                          <br>
                      </figure>
                  </center>

                  <p style="column-width:1000px;margin-left:200px;margin-right:200px;text-align:justify;">
                    In the cost function above,
                    <br>
                    <br>
                    <code>i</code> is the current timestamp and <code>n</code>  is the total prediction horizon
                    <br>
                    <code>x<sub>d<sub>i</sub></sub></code> is the desired output for the particular timestamp <code>i</code> while <code>x<sub>i</sub></code> is the system current state
                    <br>
                    <code>w<sub>x<sub>i</sub></sub></code> is the weight of the desired/reference output at the particular timestemp <code>i</code>
                    <br>
                    <code>w<sub>u<sub>i</sub></sub></code> is the weight of the rate of change of input at the particular timestemp <code>i</code>
                    <br>
                    <code>&#916u<sub>i</sub></code> is the weight of the rate of change of input at the particular timestemp <code>i</code>
                  </p>
                <center>
                    <figure>
                        <img src="images/blogs/mpc/mpc_signals.png" style="width:411;height:261px;">
                        <figcaption>MPC Time Graph</figcaption>
                        <br>
                    </figure>
                </center>

                <center>
                <p style="text-align:center;font-size:20px; "> <b style="font-weight: 500">TYPES OF MPC</b> </p>
                </center>

                <p style="column-width:1000px;margin-left:200px;margin-right:200px;text-align:justify;">
                    MPC is largely dependent on the model of the system and while it may be easy to model simple automation model, it gets extremely complicated to design dynamic systems like robots and their non-linearity is difficult to solver for the MPC.
                </p>


                <br>
                <p style="column-width:1000px;margin-left:200px;margin-right:200px;text-align:justify;">
                    The keywords <code>#ifdef and #ifndef</code> are usually used as header guards that avoid duplicate code declarations from multiple header files.
                    <br><br>
                    The <code>#define</code> keyword defines some concise functions or variables or other macros for reuse. The preprocessing phase replaces all instances of the symbolic code to actual values. An example can be seen from the compiler_example.h file shown above.
                    <br><br>
                    Keywords <code>#if, #else</code> and <code>#elif</code> are used for conditional statements that decide a few compilation during the precompilation. 
                </p> 

                <center>
                <p style="text-align:center;font-size:20px; "> <b style="font-weight: 500">CODE COMPILATION</b> </p>
                </center>

                <p style="column-width:1000px;margin-left:200px;margin-right:200px;text-align:justify;">
                    Compilation is most important step of creating an executable binary from the source code. This conversion from the code generated after preprocessing to machine level code is done by a compiler.
                    <br><br>
                </p>


                <p style="column-width:1000px;margin-left:200px;margin-right:200px;text-align:justify;">
                    These mentioned steps above are very brief explanation and have more sophisticated steps within. The scope of this article is largely to understand how the user written code is converted into a code that the integrated circuits execute. It helps understand the reason for errors that come up during code compilation and steps to avoid the same with appropriate code reuse, imports, library usage and executable configuration.
                </p>

                <center>
                <p style="text-align:center;font-size:20px; "> <b style="font-weight: 500">LINKING PHASE</b> </p>
                </center>


                </p>
                <br>
                <hr width="50%">
                <br><br>
                <p style="column-width:1000px;margin-left:200px;margin-right:200px;text-align:justify;">
                    As mentioned earlier, C++ is an amazing language but delving into the intricacies exposes multiple layers of the language that are intimidating to understand but worth applauding at the same time. The developers and the community does a great job at making this convoluted language be a high-performance platform while also not being impossible t decipher.
                </p>
            </div>
            </div>

            <p style="column-width:1000px;margin-left:550px;margin-right:200px;text-align:center;font-size: 22px;font-weight: 500;color: red">
                <i>
                IF YOU LIKED THE ARTICLE, DON'T FORGET TO LEAVE A REACTION OR A COMMENT!                         
                </i>
            </p>

            <div id="disqus_thread" style="column-width: 1000px;margin-left: 570px;margin-right: 200px;"></div>
            <script>

            /**
            *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
            *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

            var disqus_config = function () {
            this.page.url = "http://kumarakshay.me/mpc.html";  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = 331; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };

            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://kumarakshay-me.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
        <!-- Section One -->
            <div class="wrapper style2">

                <p style="margin-bottom:0;padding-bottom:0;"><hr width="50%"><center>Copyright @Akshay Kumar | Last Updated on 05/25/2019</center></p> 

            </div>
<div align=center><a href='https://www.counter12.com'><img src='https://www.counter12.com/img-y9Z8xYWb7W273YW2-50.gif' border='0' alt='counter'></a><script type='text/javascript' src='https://www.counter12.com/ad.js?id=y9Z8xYWb7W273YW2'></script></div>


    </body>
</html>
