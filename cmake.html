    <!DOCTYPE HTML>

<head>
<style>

div.blog_box {
  margin-left: 30%;
  margin-right: 10%;

  background-color: #f5f5ef;
  /*border: 1px black;*/
  opacity: 1.0;
  filter: alpha(opacity=100); /* For IE8 and earlier */
}

div.code_box {
  margin-left: 20%;
  margin-right: 10%;

  background-color: #000000;
  color: green;
  opacity: 1.0;
  filter: alpha(opacity=100); /* For IE8 and earlier */
}

div.blog_box_sidenav {
  margin-left: 8%;
  margin-right: 10%;
  position: fixed;
  background-color: #f5f5ef;
  border: 1px solid #dbdbd5;
  height: auto;
  width: 350px;
  opacity: 1.0;
  filter: alpha(opacity=100); /* For IE8 and earlier */
}


div.column{
  /*float: right;*/
  margin-right: 0%;
  margin-left: 0%;  
  width: 30%;
  /*width*/: 30%;
  position: fixed;
}

.blog_box_sidenav p:hover{
  color: #140440;
  font-weight: 500;
  /*text-decoration: bold;*/
  /*background-color: #cfc ;*/

}


code { 
  font-family: monospace;
}

</style>
</head>

<html>
    <head>
        <title>CMake - AKSHAY KUMAR</title>
        <link rel="icon" href="images/profile.jpg">
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="description" content="" />
        <meta name="keywords" content="" />
        <!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
        <script src="js/jquery.min.js"></script>
        <script src="js/jquery.dropotron.min.js"></script>
        <script src="js/skel.min.js"></script>
        <script src="js/skel-layers.min.js"></script>
        <script src="js/init.js"></script>
        <noscript>
            <link rel="stylesheet" href="css/skel.css" />
            <link rel="stylesheet" href="css/style.css" />
        </noscript>
        <!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
    </head>
    <body class="homepage">

        <!-- Header Wrapper -->
            <div class="wrapper style1">
            
            <!-- Header -->

                        
                        <!-- Nav -->
                            <div class="navbox">
                                <ul style="white-space:nowrap;margin-top: 10px">
                                    <li class="active" style="display:inline; "><a href="portfolio.html" style="text-decoration: none; font-size: 25px; font-weight: 500; color: white">PORTFOLIO &emsp; </a> </li>                                 
                                    <li class="active" style="display:inline; "><a href="images/AKSHAY_KUMAR_RESUME_1PAGE.pdf" target="_blank" style="text-decoration: none; font-size: 25px; font-weight: 500; color: white ">RESUME &emsp;</a></li>

                                    <li class="active" style="display:inline; text-decoration: none;"><a href="index.html" style="text-decoration: none;font-size: 25px; font-weight: 500; color: white">HOME &emsp;</a></li>

                                </ul>
                            </div>
                </div>
                
            </div>          

            <!-- Introduction -->
            <div class="wrapper style6" align="justify" >

            <br>

                <div class="blog_box_sidenav" align="left" >
                    <center>
                    <br>
                    <span style="font-size:25px;text-decoration: none;">LATEST POSTS</span>
                    </center><br>

                    <a style="display:block;font-size:16px;color:black;;text-decoration:none;margin-left:2%;margin-right:10%margin-top:5%" 
                    href="ros.html">
                        <p style="margin-right:2%; margin-left: 2%"> Robot Operating System (ROS) - Command Line Tools</p>
                    </a>

                    <a style="display:block;font-size:16px;color:black;;text-decoration:none;margin-left:2%;margin-right:10%margin-top:5%" 
                    href="coverage.html">
                        <p style="margin-right:2%; margin-left: 2%">  Coverage Problem in Mobile Robotics</p>
                    </a>

                    <a style="display:block;font-size:16px;color:black;;text-decoration:none;margin-left:2%;margin-right:10%margin-top:5%" 
                    href="mp_intro.html">
                        <p style="margin-right:2%; margin-left: 2%">  Motion Planning in Robotics</p>
                    </a>

                    <a style="display:block;font-size:16px;color:black;;text-decoration:none;margin-left:2%;margin-right:10%margin-top:5%" 
                    href="slam_intro.html">
                        <p style="margin-right:2%; margin-left: 2%">  Simulataneous Localization and Mapping - An Introduction</p>
                        <!-- <br> -->
                    </a>

                    <a style="display:block;font-size:16px;color:black;;text-decoration:none;margin-left:2%;margin-right:10%margin-top:5%" 
                    href="visual_slam.html">
                        <p style="margin-right:2%; margin-left: 2%">  Visual SLAM</p>
                        <br>
                    </a>                    
                    <br>
                </div>
                
            </div>

            <div class="blog_box" align="justify" >
                    <!-- <center><img src="images/posts.jpg" style="width:1120px;height:706px;margin-left:5%;"></center> -->
                <br>
                    <h2 style="font-size:40px; font-weight: 500"> CMAKE META BUILD SYSTEM</h2>
                <br>


                <p style="column-width:1000px;margin-left:200px;margin-right:200px;text-align:justify;">

                    CMake is a cross-platform generator system designed to create projects. It is not a direct build system, but a meta build system that uses a script with defined rules, called <i><b>CMakeLists.txt</b></i> to generate input files for build systems called <i><b>project files</b></i> (could be Unix Makefiles or MinGW Makefiles or others, discussed later) that support different kinds of compilation, configuration, testing and packaging options. 

                    <br><br>
                    This article explains the reasoning behind using C++, related terminology used in C++ code compilation and general commands, options and tags to be used to write <i><b>CMakeLists.txt</b></i> as per desired requirements. 
                </p>

                <center>
                    <figure>
                        <img src="images/blogs/cmake/cmake.png" style="width:482px;height:449px;">
                        <figcaption>CMake Pipeline Overview</figcaption>
                    </figure>


                    <br><br>
                </center>
                <h1 style="text-align:left;margin-left:200px;font-size:20px; ">Introduction</h1>
                <br>

                <p style="column-width:1000px;margin-left:200px;margin-right:200px;text-align:justify;">

                C/C++ is an extremely useful language used for innumerable number of applications. However, with several compilers, operating systems and hardware platforms, it becomes essential to package an optimized C++ project comptabile accross various such platforms and for different desired uses. 

                <br><br>

                CMake makes it possible for developers to generate the <i><b>project makefiles</b></i> to be used by the build system to build the software. CMake does not compile or link any source (C/C++ code files here) itself but only creates configuration files for a build system. The build system thereafter uses the configurations to compile and link the source files as desired.

                <br><br>

                <b>Build systems</b> are a collection of tools that compile the source code, execute all linking and other secondary tasks. They could be configured to not only compile source codes but also synchronise builds in multi-stage build systems. CMake uses the specified <b>generators</b> like Unix Makefiles, Ninja, MinGW Makefiles, Visual Studio and Codeblocks among others and writes the input files for the native build system. Exactly one build system is used at once.

                <br><br>                
                <b style="font-weight: 500">Note:</b>
                <br>
                <b style="font-weight: 500">gcc</b> and <b style="font-weight: 500">g++</b> are the compiler-drivers of the GNU Compiler Collection. While gcc can compile .c and .cpp files as C and C++ language files respectively, g++ considers both of them to be C++ files. Also, unlike gcc, g++ compilation automatically links all STL C++ libraries.

                <br><br>                
                For ease of understanding, here we can consider using them interchangeably.
                </p>

                <h1 style="text-align:left;margin-left:200px;font-size:20px ">Is CMake really needed?!</h1>                
                <br>

                <p style="column-width:1000px;margin-left:200px;margin-right:200px;text-align:justify;">

                C++ is a widely used programming language owing to its powerful capabilities and fast operation. Among several other things, being a compiled language makes C++ really really fast.

                <br><br>
                While <b style="font-weight: 500">compilation</b> is a topic for later, it can be understood naively as breaking down a code to its almost machine-level version and preprocessing parts as much as possible such that when executed, considerable sections of the code already have prepared answers or execute immediately on the processor and no time is spent in conversion of human-readable code into machine-compatible code at runtime.

                <br><br>

                The most common and rudimentary <b style="font-weight: 500">Hello World</b> C++ program has one <b style="font-weight: 500">main.cpp</b> file and it can be compiled using the following terminal command to obtain the 
                <br><br>
                <code>
                    ~$ g++ main.cpp -o main  // Compile
                    <br>
                    ~$ ./main // Execute
                </code>
                <br><br>

                If there are 3 files, namely <b style="font-weight: 500">si_int.cpp</b>, <b style="font-weight: 500">com_int.cpp</b> and the <b style="font-weight: 500">main.cpp</b> where the two former files have functions to compute simple interest and compound interest, used(by importing) in the last <b style="font-weight: 500">main.cpp</b> file to calculate results; they could be compiled using terminal command (for C++11)
                <br><br>
                <code>
                    ~$ g++ si_int.cpp com_int.cpp main.cpp -o main -std=c++11 // Compile
                    <br>
                    ~$ ./main // Execute
                </code>
                <br><br>                

                The two examples are indicative of the cumbersome process that could shape if there are more files, more dependencies, more libraries to link and other such unique requirements while code compilation; command-line compilation is certainly not the way to go.

                <br><br>
                For reassurance, here are some tags needed for g++ to achieve more features.
                &emsp; <br>
                &emsp; <b style="font-weight: 500">-I&ltinclude path&gt </b> - Specify a directory (to include files from)
                &emsp; <br>
                &emsp; <b style="font-weight: 500">-L&ltlibrary path&gt</b> - Specify a library directory
                &emsp; <br>
                &emsp; <b style="font-weight: 500">-0</b> - Turn ON optimizations by the compiler
                &emsp; <br>
                &emsp; <b style="font-weight: 500">-l&ltlibrary&gt</b> - Link with library lib&ltlibrary&gt.a
                &emsp; <br>
                &emsp; <b style="font-weight: 500">-Wall</b> - Turn on Warnings during compilations
                &emsp; <br>
                &emsp; <b style="font-weight: 500">-g</b> - Generate flags for debugging during compilation (Used by GDB)
                &emsp; <br><br>

                Considering the challenges in compilation, CMake provides options to the user to configure the complete project and package it as per need be. The conditions, compilation tags, machine dependencies, language versions and many such parameters.
                <br><br>

                CMake is a high-level build-system customized for C++. CMake tracks and stores all flags and conditions that should be followed when the code is finally compiled and run. The liberty of allowing extensibility in code compilation conditions and external libraries/resources used makes CMake a very useful tool.

                </p>

                <h1 style="text-align:left;margin-left:200px;font-size:20px ">Nuances of CMake</h1>                
                <br>

                <p style="column-width:1000px;margin-left:250px;margin-right:200px;text-align:justify;">

                The <i><b>CMakeLists.txt</b></i> has instructions that help developers design different build scenarios and conditional usage of generators, versions and more. Certain general CMake commands are used for some common operations. 
                <br>

                The common parameters, description and command to configure the same in a <i>CMakeLists.txt</i> are summarized here. <br><br>

                <b>NOTE: </b> <br>

                    Most of the command signatures are only short-hand signatures and do not show all the options and configurable parameters that CMake actually suppports.
                    <br>More detailed explanation(generally needed only if a very complex setup is employed) can be found on the <a href="https://cmake.org/documentation"> official website of CMake.</a>  
                <br><br>

                <b>&#8658</b> Set string variables using actual string values <br>
                <code> 
                    &emsp; set(&ltvariable_identifier&gt &ltstring_value&gt)
                </code><br><br>

                <b>&#8658</b> Set string variables using another variable value <br>
                <code> 
                    &emsp; set(&ltvariable_identifier&gt &lt${another_variable_identifier}&gt)
                </code><br><br>


                <b>&#8658</b> Append string variables using another variable value <br>
                <code> 
                    &emsp; string(APPEND &ltvariable_identifier&gt &ltstring_value&gt)
                </code><br><br>

                <b>&#8658</b> Set list variables using actual string values <br>
                <code> 
                    &emsp; set(&ltlist_identifier&gt &ltstring_value1&gt &ltstring_value2&gt)
                </code><br><br>

                <b>&#8658</b> Set list variables using another list value <br>
                <code> 
                    &emsp; set(&ltlist_identifier&gt &lt${another_list_identifier}&gt)
                </code><br><br>

                <b>&#8658</b> Append list variables using another list value <br>
                <code> 
                    &emsp; list(APPEND &ltlist_identifier&gt &ltstring_value&gt)
                </code><br><br>

                The <code>&ltstring_value&gt</code> variable can be a file name as well. The identifiers can either be user defined for later use the script or from the common list of CMake supported variables like <code>CMAKE_BUILD_TYPE</code> and <code>PROJECT_LINK_LIBS</code> among others. 

                <br><br>
                <b>&#8658</b> CMake Package version to be used. Versions > 3.0.0 are generally used though. <br>
                <code> 
                    &emsp; cmake_minimum_required(VERSION 2.8.9)
                </code><br><br>

               <b>&#8658</b> Operations dependent on OS type. CMake can generate different configurations depending on Linux/Apple/Windows OS. <br>
                <code> 
                        &emsp;if(APPLE)<br>
                            &emsp;// do something for APPLE OS<br> &emsp;
                        endif()<br> &emsp;
                                <br> &emsp;
                        if(UNIX AND LINUX) <br> &emsp;
                            // do something for LINUX<br> &emsp;
                        endif())<br> &emsp;
                                <br> &emsp;
                        if(WIN32)<br> &emsp;
                            // do something for WINDOWS OS <br> &emsp;
                        endif()
                </code><br><br>

                <b>&#8658</b> Software build type<br>
                <code> 
                    &emsp; set(CMAKE_BUILD_TYPE Release/Debug)
                </code><br><br>

                <b>&#8658</b> C++ Version. For instance, C++11 in this case <br>
                <code> 
                    &emsp; set(CMAKE_CXX_STANDARD 11)
                </code><br><br>

                <b>&#8658</b> Give a name to the project<br>
                <code> 
                    &emsp; project(&ltstring_value&gt)
                </code><br><br>

                <b>&#8658</b> An executable is built from the source file and assign the <code>string_value</code> as the name of the executable<br>
                <code> 
                    &emsp; add_executable(&ltstring_value&gt &ltcode_file_name&gt)
                </code><br><br>

                <b>&#8658</b> Add the executable library to the compilation sequence<br>
                <code> 
                    &emsp; add_library(&ltstring_value&gt &ltlibrary_type&gt &ltfile_location&gt) <br>
                </code>
                    &emsp; For example, <br>
                <code> 
                    &emsp; add_library_(&ltlibName&gt SHARED/STATIC src/lib_executable.cpp)<br>
                </code>
                    &emsp; <i>If STATIC, then the name of the library is libName.a and it is libName.so if SHARED </i>
                <br><br>

                <b>&#8658</b> Include the header files from the source code into the build environment <br>
                <code> 
                    &emsp; include_directories(&ltinclude_header_locations&gt)
                </code><br><br>

                <b>&#8658</b> While to set source code files to a string value, all files need to be mentioned manually, GLOB or GLOB_RECURSE allows for searching and selecting multiple source code files<br>
                <code> 
                    &emsp; file(GLOB SOURCES "src/*.cpp")
                </code><br><br>

                <b>&#8658</b> Several properties need to define for the executable binary<br>
                An example would be setting the language as CXX(for C++).
                <code> 
                    &emsp; set_target_properties(cmake_usage_example PROPERTIES LINKER_LANGUAGE CXX)
                </code><br><br>                

                <b>&#8658</b> Defining the location in the system for installation of the library.<br>
                <code> 
                    &emsp; install(TARGET &ltlibray_name&gt DESTINATION &ltdestination_location&gt)
                </code><br><br>



                <b>&#8658</b> Find the location of a library and store its reference in a temporary <i>VARIABLE</i> cache. <br>
                <code> 
                    &emsp; find_package(&ltVARIABLE&gt &ltlibrary_name&gt &ltpath_to_library&gt)
                </code><br><br>

                <b>&#8658</b> Link an already extant library (either native library or third-party installed library or custom-built one ) to the current executable or library being created <br>
                <code> 
                    &emsp; target_link_libraries(&ltto_be_linked&gt options &ltto_link_ref&gt)
                </code><br>
                    &emsp; For example
                <code><br>
                    &emsp; target_link_libraries(libApp LINK_PUBLIC ${VARIABLE})
                </code><br>
                    &emsp; <code>&ltlib_to_link_ref&gt</code> can be found from something like <code>find_package</code>
                <br><br>

                </p>

                <h1 style="text-align:left;margin-left:200px;font-size:20px ">Example C++ Application & CMakeLists.txt</h1>

                <p style="column-width:1000px;margin-left:220px;margin-right:200px;text-align:justify;">
                    <br>
                    <u>Install <b>CMake</b> and check version</u>                    
                    <div class="code_box">
                        <br>
                        <code>
                            &emsp; :~/$<b>sudo apt-get install cmake</b> // Install CMake<br>
                            &emsp; :~/$<b>cmake --version</b> // Check CMake version<br> 
                        </code>
                        <br>
                    </div>
                </p>   

                <p style="column-width:1000px;margin-left:220px;margin-right:200px;text-align:justify;font-weight: 500">
                    The following example is a simple C++ application. It has a class with functions for a few mathematical operations. The main script to be executed uses this class as need be.
                    Finally, the <em>Unix Makefiles</em> CMake generator will be used to create the build system Makefile. <br>
                <br>
                cpp-cmake-example <br>
                    ├── CMakeLists.txt<br>
                    ├── include<br>
                    │   &emsp;└── computations.h<br>
                    └── src<br>
                        &emsp;&emsp;&emsp;└── computations.cpp<br>
                        &emsp;&emsp;&emsp;└── main,cpp<br>

                </p>

                <center>
                <p style="column-width:1000px;">

                    <u style="font-weight: 500; align=center">Example C++ Application - Source Code <b>computations.cpp</b> file</u>
                            <figure>
                                <img src="images/blogs/cmake/comp_cpp.png" >
                            </figure>
                        <!-- </center>                     -->
                    <br>
                </p>
                <p style="column-width:1000px;">

                    <u style="font-weight: 500; align=center">Example C++ Application - Header File <b>computations.h</b> file</u>  <br>
                            <figure>
                                <img src="images/blogs/cmake/comp_h.png">
                            </figure>
                        <!-- </center>                     -->
                        <br>
                </p>
                <p style="column-width:1000px;">                
                    <u style="font-weight: 500; align=center">Example C++ Application - Main file <b>main.h</b> file</u>  <br>
                            <figure>
                                <img src="images/blogs/cmake/main.png">
                            </figure>
                        <!-- </center>                     -->
                        <br>
                </p>
                <p style="column-width:1000px;">                
                    <u style="font-weight: 500; align=center">Example C++ Application - CMake file <b>CMakeLists.txt</b> file</u>  <br>
                            <figure>
                                <img src="images/blogs/cmake/cmakelists.png">
                            </figure>
                        <br>
                </p>
                </center>                    

                <center>
                    <a style="font-size: 20px" href="images/blogs/cmake/cpp-cmake-example.zip" download><b>DOWNLOAD EXAMPLE SOURCE CODE</b></a>
                </center>

                <p style="column-width:1000px;margin-left:220px;margin-right:200px;text-align:justify;font-weight: 500">
 
                    <br>
                    Finally, the project is executed using the steps shown in the image below.

                    <ul style="column-width:1000px;margin-left:220px;margin-right:200px;text-align:justify;list-style-type: disc">
                     <li> We create a build folder to avoid cluttering built files with source code </li>
                     <li> <code>cd</code> into the folder and then run <code>cmake ..</code> where the two dots represent the presence of CMakeLists.txt in one folder prior; to generate the project files</li>
                     <li> Run <code>make</code> or <code>make &ltexecutable&gt</code> to compile the source code</li>
                     <li> <code>./cmake_usage_example</code> to run the compiled sample code</li>
                    </ul> 
                        <center>
                            <figure>
                                <img src="images/blogs/cmake/execute.png">
                            </figure>
                        </center>                    

                </p>
        </div>
                    <br><br>


            </div>
            </div>
    
            <p style="column-width:1000px;margin-left:550px;margin-right:200px;text-align:center;font-size: 22px;font-weight: 500;color: red">
                <i>
                IF YOU LIKED THE ARTICLE, DON'T FORGET TO LEAVE A REACTION OR A COMMENT!                         
                </i>
            </p>
    

            <div id="disqus_thread" style="column-width: 1000px;margin-left: 570px;margin-right: 200px;"></div>
            <script>

            /**
            *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
            *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

            var disqus_config = function () {
            this.page.url = "http://kumarakshay.me/cmake.html";  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = 126; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };

            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://kumarakshay-me.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


        <!-- Section One -->
            <div class="wrapper style2">

                <p style="margin-bottom:0;padding-bottom:0;"><hr width="50%"><center>Copyright @Akshay Kumar | Last Updated on 05/25/2019</center></p> 

            </div>
<div align=center><a href='https://www.counter12.com'><img src='https://www.counter12.com/img-y9Z8xYWb7W273YW2-50.gif' border='0' alt='counter'></a><script type='text/javascript' src='https://www.counter12.com/ad.js?id=y9Z8xYWb7W273YW2'></script></div>

            <div id="mySidenav" class="sidenav">
<!--              <a href="#" id="about">About
 -->

                     <a href="mailto:singhakshay324@gmail.com" target="_blank" id="gmail1"><img src="images/contacts/gmail.png" style="width:50px;height:50px;"> </a>

                     <a href="mailto:akumar5@wpi.edu" target="_blank" id="gmail2"><img src="images/contacts/outlook.png" style="width:50px;height:50px;"></a>

                    <a href="http://in.linkedin.com/in/kumarakshay324" target="_blank" id="linkedin"><img src="images/contacts/linkedin.png" style="width:50px;height:50px;;"></a></center>

                     <a href="https://github.com/kumar-akshay324" target="_blank" id="github"><img src="images/contacts/github.png" style="width:50px;height:50px;"></a>

                    <a href=" http://www.quora.com/profile/Akshay-Singh-66" target="_blank" id="quora"><img src="images/contacts/quora.png" style="width:50px;height:50px;;"></a>

                    <a href="http://www.facebook.com/singhakshay324" target="_blank" id="social"><img src="images/contacts/fb.png" style="width:50px;height:50px;;"></a>


<!--              <a href="#" id="blog">Blog</a>
              <a href="#" id="projects">Projects</a>
              <a href="#" id="contact">Contact</a>
 -->            </div>




    </body>
</html>
